= Lab: Ansible Automation Platform as Code on OpenShift

In this lab, you will learn how to deploy and configure Red Hat Ansible Automation Platform (AAP) on an OpenShift cluster using the "Configuration as Code" (CaC) approach. We will utilize a validated collection designed to automate the installation via the AAP Operator.

== Prerequisites

Before starting this lab, ensure you have access to:

* *Red Hat OpenShift Container Platform*: A running cluster where you have `cluster-admin` privileges.
* *Red Hat Dev Spaces*: Your workspace environment for editing code and running terminal commands.

== Overview

Installing AAP as code allows for repeatable, version-controlled infrastructure. We will create a very simple playbook to call a role provided by the validated collection `infra.aap_configuration` that interacts with the OpenShift API and the AAP Operator.

== 1: Setup Environment

=== 1.1: Prepare your Dev Spaces Environment

First, open your Red Hat Dev Spaces instance and initialize your workspace.

. Open the terminal in Dev Spaces.
. Create a new directory for this project:
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
mkdir --parents --verbose /projects/aap-ops 
cd /projects/aap-ops
----

=== 1.2: Create a Secrets file

Create a separate secrets file as a best practice:

[source,yaml,role=execute,subs="verbatim,attributes",title="/projects/aap-ops/secrets.yml"]
----
---
openshift_username: '{openshift_cluster_admin_username}'
openshift_password: '{openshift_cluster_admin_password}'
...
----

=== 1.3: Create Playbook

Create a playbook to call the `infra.aap_utilities.aap_ocp_install` role with task vars defining vital values:

[source,bash,role=execute,subs="verbatim,attributes",title="/projects/aap-ops/install_aap.yml"]
----
---
- name: Install AAP on OCP
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Include AAP OCP Install role
      ansible.builtin.include_role:
        name: infra.aap_utilities.aap_ocp_install
      vars:
        aap_ocp_install_connection:
          host: '{openshift_api_server_url}'
          username: '{{ openshift_username }}'
          password: '{{ openshift_password }}'
          validate_certs: false
        aap_ocp_install_namespace: aap-as-code
        aap_ocp_install_operator:
          channel: "stable-2.6"
        aap_ocp_install_platform:
          instance_name: aap
        aap_ocp_install_controller:
          install: true
        aap_ocp_install_eda:
          install: false
        aap_ocp_install_hub:
          install: false
          file_storage_size: 100Gi
          file_storage_storage_class: ocs-external-storagecluster-cephfs
        aap_ocp_install_lightspeed:
          install: false
...
----

NOTE: The more components installed at once, the longer it will take. Feel free to start small and re-run with more components enabled to iteratively deploy components.

=== 1.4: Setup ansible.cfg

. If you review the documentation this role specifies requirements we need to install in this environment.
. First, obtain a token from https://console.redhat.com/ansible/automation-hub/token/[Automation Hub,window=_blank]
. Under **Offline Token** click **Load Token** and copy this token and store it somewhere secure as it cannot be displayed again
+
NOTE: For additional information see https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.6/html/managing_automation_content/managing-cert-valid-content#token-management-hub_cloud-sync[Managing Automation Content Documentation,window=_blank]
+
. Create an `ansible.cfg` file:
+
[source,properties,role=execute,subs="verbatim,attributes,callouts",title="Custom AAP Deployment",title="/projects/aap-ops/ansible.cfg"]
----
[galaxy]
server_list = hub, hub_validated, galaxy

[galaxy_server.hub]
url=https://console.redhat.com/api/automation-hub/content/published/
auth_url=https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token
token=#YOUR_TOKEN#

[galaxy_server.hub_validated]
url=https://console.redhat.com/api/automation-hub/content/validated/
auth_url=https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token
token=#YOUR_TOKEN#

[galaxy_server.galaxy]
url=https://galaxy.ansible.com
----
+
NOTE: Be sure to replace #YOUR_TOKEN# with the token from step 3.

=== 1.5: Install Collections

Install required collections:

[source,bash,role=execute,subs="verbatim,attributes",title="/projects/aap-ops/install_aap.yml"]
----
ansible-galaxy collection install infra.aap_utilities redhat.openshift
----

[source,output]
----
ansible-galaxy collection install redhat.openshift infra.aap_utilities
Starting galaxy collection install process
Process install dependency map
Starting collection install process
Downloading https://console.redhat.com/api/automation-hub/v3/plugin/ansible/content/published/collections/artifacts/redhat-openshift-5.0.0.tar.gz to /home/user/.ansible/tmp/ansible-local-57063izw_zm8z/tmpfxmq2iwn/redhat-openshift-5.0.0-cywjtcc3
Installing 'redhat.openshift:5.0.0' to '/home/user/.ansible/collections/ansible_collections/redhat/openshift'
Downloading https://console.redhat.com/api/automation-hub/v3/plugin/ansible/content/published/collections/artifacts/kubernetes-core-6.2.0.tar.gz to /home/user/.ansible/tmp/ansible-local-57063izw_zm8z/tmpfxmq2iwn/kubernetes-core-6.2.0-xyd0elsb
redhat.openshift:5.0.0 was installed successfully
Installing 'kubernetes.core:6.2.0' to '/home/user/.ansible/collections/ansible_collections/kubernetes/core'
Downloading https://console.redhat.com/api/automation-hub/v3/plugin/ansible/content/validated/collections/artifacts/infra-aap_utilities-2.8.0.tar.gz to /home/user/.ansible/tmp/ansible-local-57063izw_zm8z/tmpfxmq2iwn/infra-aap_utilities-2.8.0-24n1tg51
kubernetes.core:6.2.0 was installed successfully
Installing 'infra.aap_utilities:2.8.0' to '/home/user/.ansible/collections/ansible_collections/infra/aap_utilities'
Downloading https://console.redhat.com/api/automation-hub/v3/plugin/ansible/content/published/collections/artifacts/ansible-posix-2.1.0.tar.gz to /home/user/.ansible/tmp/ansible-local-57063izw_zm8z/tmpfxmq2iwn/ansible-posix-2.1.0-foqzpncl
infra.aap_utilities:2.8.0 was installed successfully
Installing 'ansible.posix:2.1.0' to '/home/user/.ansible/collections/ansible_collections/ansible/posix'
ansible.posix:2.1.0 was installed successfully
----

=== 1.6: Install Python Libraries

Install required python libraries:

[source,bash,role=execute,subs="verbatim,attributes"]
----
pip install requests requests-oauthlib kubernetes
----

[source,output]
----
Collecting requests
  Using cached requests-2.32.5-py3-none-any.whl (64 kB)
Collecting requests-oauthlib
  Using cached requests_oauthlib-2.0.0-py2.py3-none-any.whl (24 kB)
Collecting kubernetes
  Using cached kubernetes-35.0.0-py2.py3-none-any.whl (2.0 MB)
Collecting charset_normalizer<4,>=2
  Using cached charset_normalizer-3.4.4-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (151 kB)
Collecting idna<4,>=2.5
  Using cached idna-3.11-py3-none-any.whl (71 kB)
Collecting urllib3<3,>=1.21.1
  Using cached urllib3-2.6.3-py3-none-any.whl (131 kB)
Collecting certifi>=2017.4.17
  Using cached certifi-2026.1.4-py3-none-any.whl (152 kB)
Collecting oauthlib>=3.0.0
  Using cached oauthlib-3.3.1-py3-none-any.whl (160 kB)
Collecting six>=1.9.0
  Using cached six-1.17.0-py2.py3-none-any.whl (11 kB)
Collecting python-dateutil>=2.5.3
  Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
Requirement already satisfied: pyyaml>=5.4.1 in ./.venv/lib64/python3.11/site-packages (from kubernetes) (6.0.3)
Collecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0
  Using cached websocket_client-1.9.0-py3-none-any.whl (82 kB)
Collecting durationpy>=0.7
  Using cached durationpy-0.10-py3-none-any.whl (3.9 kB)
Installing collected packages: durationpy, websocket-client, urllib3, six, oauthlib, idna, charset_normalizer, certifi, requests, python-dateutil, requests-oauthlib, kubernetes
Successfully installed certifi-2026.1.4 charset_normalizer-3.4.4 durationpy-0.10 idna-3.11 kubernetes-35.0.0 oauthlib-3.3.1 python-dateutil-2.9.0.post0 requests-2.32.5 requests-oauthlib-2.0.0 six-1.17.0 urllib3-2.6.3 websocket-client-1.9.0

[notice] A new release of pip available: 22.3.1 -> 25.3
[notice] To update, run: pip install --upgrade pip
----

== 2: Run Playbook

=== 2.1: First Attempt

. Now try to run the playbook. This will fail, can you spot why?
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
ansible-playbook install_aap.yml \
  --verbose \
  --verbose \
  --extra-vars @secrets.yml
----
+
[source,output]
----
ansible-playbook [core 2.19.3]
  config file = /projects/aap-ops/ansible.cfg
  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.11/site-packages/ansible
  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.11.13 (main, Aug 21 2025, 00:00:00) [GCC 11.5.0 20240719 (Red Hat 11.5.0-11)] (/usr/bin/python3.11)
  jinja version = 3.1.6
  pyyaml version = 6.0.3 (with libyaml v0.2.5)
Using /projects/aap-ops/ansible.cfg as config file
Skipping callback 'minimal', as we already have a stdout callback.
Skipping callback 'oneline', as we already have a stdout callback.

PLAYBOOK: install_aap.yml ******************************************************
1 plays in install_aap.yml

PLAY [Install AAP on OCP] ******************************************************

TASK [Include AAP OCP Install role] ********************************************
task path: /projects/aap-ops/install_aap.yml:27
included: infra.aap_utilities.aap_ocp_install for localhost

TASK [infra.aap_utilities.aap_ocp_install : Include pre-validation tasks] ******
task path: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/main.yml:2
included: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/pre-validate.yml for localhost

...

TASK [infra.aap_utilities.aap_ocp_install : Ensure no validation errors found] *****************************************************************************************************************
task path: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/pre-validate.yml:135
[ERROR]: Task failed: Action failed: ['The following errors must be fixed to continue:', ["aap_ocp_install_namespace must be a lowercase RFC 1123 label consisting of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc'"]]
Origin: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/pre-validate.yml:135:3

133     - (( 'eda' in ansible_run_tags ) or ( 'all' in ansible_run_tags and aap_ocp_install_eda is defined )) and not...
134
135 - name: Ensure no validation errors found
      ^ column 3

fatal: [localhost]: FAILED! => {
    "msg": [
        "The following errors must be fixed to continue:",
        [
            "aap_ocp_install_namespace must be a lowercase RFC 1123 label consisting of lower case alphanumeric characters or '-', and must start and end with an alphanumeric character (e.g. 'my-name',  or '123-abc'"
        ]
    ]
}

PLAY RECAP *************************************************************************************************************************************************************************************
localhost
----
+
. This is a known issue as of the current collection release (2.8.0) which will not work with Ansible 2.19 or higher. With the double `--verbose` level, we can also see the version when the playbook executes. Review what version you are using:
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
ansible --version
----
+
----
ansible [core 2.19.3]
  config file = None
  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.11/site-packages/ansible
  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/local/bin/ansible
  python version = 3.11.13 (main, Aug 21 2025, 00:00:00) [GCC 11.5.0 20240719 (Red Hat 11.5.0-11)] (/usr/bin/python3.11)
  jinja version = 3.1.6
  pyyaml version = 6.0.3 (with libyaml v0.2.5)
----
. This is a currently known issue, but is a great opportunity to explore this scenario. This will be addressed in the next section.
+
NOTE: The rest of this lab works with ansible-core 2.19, only config as code labs are affected.

=== 2.2: Setup Python Virtual Environment

. This is a currently known issue, but is a great opportunity to explore this scenario. Create a virtual environment to downgrade the version of `ansible-core` for this run.
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
python3 -m venv .venv
source .venv/bin/activate
----
+
[source,output]
----
(.venv) bash-5.1$
----
+
NOTE: Your prompt changes to reflect the virtual environment.
+
. Install `ansible-core` version 2.18:
+
----
pip install ansible-core==2.18 requests requests-oauthlib kubernetes
----
+
.Output
[%collapsible]
====
[source,bash]
----
Defaulting to user installation because normal site-packages is not writeable
Collecting ansible-core==2.18
  Downloading ansible_core-2.18.0-py3-none-any.whl (2.2 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.2/2.2 MB 76.1 MB/s eta 0:00:00
Requirement already satisfied: requests in /usr/local/lib/python3.11/site-packages (2.32.5)
Requirement already satisfied: requests-oauthlib in /usr/local/lib/python3.11/site-packages (2.0.0)
Requirement already satisfied: kubernetes in /usr/local/lib/python3.11/site-packages (34.1.0)
Requirement already satisfied: jinja2>=3.0.0 in /usr/local/lib/python3.11/site-packages (from ansible-core==2.18) (3.1.6)
Requirement already satisfied: PyYAML>=5.1 in /usr/local/lib64/python3.11/site-packages (from ansible-core==2.18) (6.0.3)
Requirement already satisfied: cryptography in /usr/local/lib64/python3.11/site-packages (from ansible-core==2.18) (46.0.3)
Requirement already satisfied: packaging in /usr/local/lib/python3.11/site-packages (from ansible-core==2.18) (25.0)
Collecting resolvelib<1.1.0,>=0.5.3
  Downloading resolvelib-1.0.1-py2.py3-none-any.whl (17 kB)
Requirement already satisfied: charset_normalizer<4,>=2 in /usr/local/lib64/python3.11/site-packages (from requests) (3.4.4)
Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.11/site-packages (from requests) (3.11)
Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.11/site-packages (from requests) (2.3.0)
Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.11/site-packages (from requests) (2025.10.5)
Requirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.11/site-packages (from requests-oauthlib) (3.3.1)
Requirement already satisfied: six>=1.9.0 in /usr/local/lib/python3.11/site-packages (from kubernetes) (1.17.0)
Requirement already satisfied: python-dateutil>=2.5.3 in /usr/local/lib/python3.11/site-packages (from kubernetes) (2.9.0.post0)
Requirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.11/site-packages (from kubernetes) (2.41.1)
Requirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.11/site-packages (from kubernetes) (1.9.0)
Requirement already satisfied: durationpy>=0.7 in /usr/local/lib/python3.11/site-packages (from kubernetes) (0.10)
Requirement already satisfied: cachetools<7.0,>=2.0.0 in /usr/local/lib/python3.11/site-packages (from google-auth>=1.0.1->kubernetes) (6.2.1)
Requirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.11/site-packages (from google-auth>=1.0.1->kubernetes) (0.4.2)
Requirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.11/site-packages (from google-auth>=1.0.1->kubernetes) (4.9.1)
Requirement already satisfied: MarkupSafe>=2.0 in /usr/local/lib64/python3.11/site-packages (from jinja2>=3.0.0->ansible-core==2.18) (3.0.3)
Requirement already satisfied: cffi>=2.0.0 in /usr/local/lib64/python3.11/site-packages (from cryptography->ansible-core==2.18) (2.0.0)
Requirement already satisfied: pycparser in /usr/local/lib/python3.11/site-packages (from cffi>=2.0.0->cryptography->ansible-core==2.18) (2.23)
Requirement already satisfied: pyasn1<0.7.0,>=0.6.1 in /usr/local/lib/python3.11/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes) (0.6.1)
Installing collected packages: resolvelib, ansible-core
  WARNING: The scripts ansible, ansible-config, ansible-console, ansible-doc, ansible-galaxy, ansible-inventory, ansible-playbook, ansible-pull, ansible-test and ansible-vault are installed in '/home/user/.local/bin' which is not on PATH.
  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
Successfully installed ansible-core-2.18.0 resolvelib-1.0.1
----
====
+
. Verify the version again:
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
ansible --version
----
+
----
ansible [core 2.18.0]
  config file = /projects/aap-ops/ansible.cfg
  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /projects/aap-ops/.venv/lib64/python3.11/site-packages/ansible
  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections
  executable location = /projects/aap-ops/.venv/bin/ansible
  python version = 3.11.13 (main, Aug 21 2025, 00:00:00) [GCC 11.5.0 20240719 (Red Hat 11.5.0-11)] (/projects/aap-ops/.venv/bin/python3)
  jinja version = 3.1.6
  libyaml = True
----
+
NOTE: In case you still see version 2.19 run the command `hash -r` and try again.

=== 2.3 Re-run Playbook

Now, run the playbook once again and it should succeed:

[source,bash,role=execute,subs="verbatim,attributes"]
----
ansible-playbook install_aap.yml \
  --verbose \
  --verbose \
  --extra-vars @secrets.yml
----

[source,output]
----
ansible-playbook [core 2.18.0]
  config file = /projects/aap-ops/ansible.cfg
  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /projects/aap-ops/.venv/lib64/python3.11/site-packages/ansible
  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections
  executable location = /projects/aap-ops/.venv/bin/ansible-playbook
  python version = 3.11.13 (main, Aug 21 2025, 00:00:00) [GCC 11.5.0 20240719 (Red Hat 11.5.0-11)] (/projects/aap-ops/.venv/bin/python3)
  jinja version = 3.1.6
  libyaml = True
Using /projects/aap-ops/ansible.cfg as config file
Skipping callback 'default', as we already have a stdout callback.
Skipping callback 'minimal', as we already have a stdout callback.
Skipping callback 'oneline', as we already have a stdout callback.

PLAYBOOK: install_aap.yml ******************************************************
1 plays in install_aap.yml

PLAY [Install AAP on OCP] ******************************************************

TASK [Include AAP OCP Install role] ********************************************
task path: /projects/aap-ops/install_aap.yml:27
included: infra.aap_utilities.aap_ocp_install for localhost

TASK [infra.aap_utilities.aap_ocp_install : Include pre-validation tasks] ******
task path: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/main.yml:2
included: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/pre-validate.yml for localhost

...

TASK [infra.aap_utilities.aap_ocp_install : Include Ansible Automation Platform controller install tasks] ****************************************
task path: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/main.yml:42
skipping: [localhost] => {"changed": false, "false_condition": "aap_ocp_install_controller is defined and not __aap_ocp_install_25_install", "skip_reason": "Conditional result was False"}

TASK [infra.aap_utilities.aap_ocp_install : Include Ansible Automation Platform hub install tasks] ***********************************************
task path: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/main.yml:52
skipping: [localhost] => {"changed": false, "false_condition": "aap_ocp_install_hub is defined and not __aap_ocp_install_25_install", "skip_reason": "Conditional result was False"}

TASK [infra.aap_utilities.aap_ocp_install : Include Ansible Automation Platform EDA install tasks] ***********************************************
task path: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/main.yml:62
skipping: [localhost] => {"changed": false, "false_condition": "aap_ocp_install_eda is defined and not __aap_ocp_install_25_install", "skip_reason": "Conditional result was False"}

TASK [infra.aap_utilities.aap_ocp_install : Include OpenShift finalization tasks] ****************************************************************
task path: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/main.yml:73
included: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/finalization.yml for localhost

TASK [infra.aap_utilities.aap_ocp_install : If login succeeded revoke OpenShift API token] *******************************************************
task path: /home/user/.ansible/collections/ansible_collections/infra/aap_utilities/roles/aap_ocp_install/tasks/finalization.yml:2
ok: [localhost] => {"changed": false, "k8s_auth": {}, "openshift_auth": {}}

PLAY RECAP ***************************************************************************************************************************************
localhost    
----

NOTE: The installation process can take 10-15 minutes as OpenShift all the resources, depending on which components are enabled in the playbook.

== 5: Verify the Deployment

Once the playbook completes, verify that the AAP components are running in OpenShift.

. Launch the link:{openshift_cluster_console_url}[OpenShift Web Console,window=_blank]
. Navigate to **Ecosystem** on the left hand navigation -> **Installed Operators**.
. Next to the `Project:` dropdown in the top left, ensure `aap-as-code` is the project shown.
. Click on the `Ansible Automation Platform` operator.
. In the toolbar, click on `All instances`.
. Verify installation was completed.
+
image::13-platform-aap_on_ocp_cac/installed-operators-aap.png[Installed Operators in the AAP Project]
+
. Navigate to *Networking* -> *Routes*
. Open the URL under *Location* for the *aap* instance in a new window
. Still within OpenShift, navigate to *Workloads* -> *Secrets*
. Click on *aap-admin-password*
. Scroll to the bottom and copy the password
. Use `admin` as the username and the secret copied to login and verify
. Feel free as a bonus to modify your playbook and deploy additional items

== 6: Reset the Environment

Before completing this lab, deactivate the python virtual environment:

[source,bash,role=execute,subs="verbatim,attributes"]
----
deactivate
----

== 7: Use an Execution Environment

Better yet, use a supported execution environment

. Log in to your PAH container registry with your AAP user credentials:
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
podman login registry.redhat.io
----
+
[source,output,subs="callouts"]
----
Username: #YOUR_REDHAT_USERNAME#
Password: #YOUR_REDHAT_PASSWORD#
Login Succeeded!
----
+
. Pull the supported image for AAP 2.6:
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
podman pull registry.redhat.io/ansible-automation-platform-26/ee-supported-rhel9:latest
----
+
[source,output]
----
Trying to pull registry.redhat.io/ansible-automation-platform-26/ee-supported-rhel9:latest...
Getting image source signatures
Checking if image destination supports signatures
Copying blob b056804d4c63 done   | 
Copying blob b056804d4c63 done   | 
Copying config c7681229aa done   | 
Writing manifest to image destination
Storing signatures
c7681229aa32057665a71bc70a5251658cfaeb60648bb424751aa4e450889eae
----
+
. Verify the image locally with `podman images`:
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
podman images | grep ansible-automation-platform
----
+
[source,output]
----
registry.redhat.io/ansible-automation-platform-26/ee-supported-rhel9  latest      c7681229aa32  5 weeks ago  2.6 GB
----
+
. Now run the `install_aap.yml` playbook, but this time with the supported EE:
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
ansible-navigator \
  --execution-environment-image registry.redhat.io/ansible-automation-platform-26/ee-supported-rhel9 \
  run install_aap.yml  \
  --mode stdout
----
+
. This fails because the validated collections are not included with the supported image.
+
[source,output]
----
ERROR! the role 'infra.aap_utilities.aap_ocp_install' was not found in /projects/aap-ops/roles:/home/runner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/projects/aap-ops

The error appears to be in '/projects/aap-ops/install_aap.yml': line 29, column 15, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

      ansible.builtin.include_role:
        name: infra.aap_utilities.aap_ocp_install
              ^ here

PLAY RECAP *********************************************************************
Please review the log for errors.
----
+
. The good thing is, we can base a new image on the supported one and. Create an `execution-environment.yml` file with everything we just did in a single file:
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
---
version: 3

images:
  base_image:
    name: registry.redhat.io/ansible-automation-platform-26/ee-supported-rhel9:latest

dependencies:
  ansible_core:
    package_pip: ansible-core==2.18
  galaxy:
    collections:
      - name: infra.aap_utilities
      - name: redhat.openshift
      - name: kubernetes.core
  python:
    - requests 
    - requests-oauthlib
    - kubernetes
options:
  package_manager_path: /usr/bin/microdnf
...
----
+
. Build a new Execution Environment:
+
[source,bash,role=execute,subs="verbatim,attributes"]
----
ansible-builder build --verbosity 1
----
+
.Full output
[%collapsible]
====
[source,bash]
----
Ansible Builder is generating your execution environment build context.
File context/_build/requirements.yml is already up-to-date.
File context/_build/requirements.txt is already up-to-date.
Creating context/_build
File context/_build/ansible.cfg is already up-to-date.
File context/_build/scripts/assemble is already up-to-date.
File context/_build/scripts/install-from-bindep is already up-to-date.
File context/_build/scripts/introspect.py is already up-to-date.
File context/_build/scripts/check_galaxy is already up-to-date.
File context/_build/scripts/check_ansible is already up-to-date.
File context/_build/scripts/pip_install is already up-to-date.
File context/_build/scripts/entrypoint is already up-to-date.
Ansible Builder is building your execution environment image. Tags: my-custom:1.0
Running command:
  podman build -f context/Containerfile -t my-custom:1.0 context
[1/4] STEP 1/14: FROM registry.redhat.io/ansible-automation-platform-26/ee-supported-rhel9:latest AS base
[1/4] STEP 2/14: USER root
--> Using cache b5084328f117b947a2eb8b3bd10420095301567cc3cc1e74727c9e0e67033f6c
--> b5084328f117
[1/4] STEP 3/14: ENV PIP_BREAK_SYSTEM_PACKAGES=1
--> Using cache 98be6bc676441672749fe8068adc25a775ba62da93e7d4e52e89869ca48d5929
--> 98be6bc67644
[1/4] STEP 4/14: ARG EE_BASE_IMAGE
--> Using cache d66d769dc7e21dc4d2908506581802c6231d0a297e9f6523b68339421ebbfb07
--> d66d769dc7e2
[1/4] STEP 5/14: ARG PYCMD
--> Using cache 4a851683661110af4b5479aa769bec043f0d2f5f8c01feb9defedab97227326e
--> 4a8516836611
[1/4] STEP 6/14: ARG PKGMGR_PRESERVE_CACHE
--> Using cache 713ff2206e40cde5826df7770a3269ee3616c7153d768bf93e81cc2908343e87
--> 713ff2206e40
[1/4] STEP 7/14: ARG ANSIBLE_GALAXY_CLI_COLLECTION_OPTS
--> Using cache d7065e94b3bdf9a6d9aef98113c6b6b723480c322c0f4143aca0c616b384031a
--> d7065e94b3bd
[1/4] STEP 8/14: ARG ANSIBLE_GALAXY_CLI_ROLE_OPTS
--> Using cache 7e31b4eb0fe45084938a5ed7c693712a9ee692d2d825577a992f19755da2ffd6
--> 7e31b4eb0fe4
[1/4] STEP 9/14: ARG ANSIBLE_INSTALL_REFS
--> Using cache 70da6b18dacce32a8b137efab07577346b91845ac84bda5e04a7062be5b72bba
--> 70da6b18dacc
[1/4] STEP 10/14: ARG PKGMGR
--> Using cache 440077043753c7b644e0a231f3933c880c36303d287a4062a0a78000a5eab551
--> 440077043753
[1/4] STEP 11/14: COPY _build/scripts/ /output/scripts/
--> Using cache ea967ff82110526600921c131935edaec4e5a9c96b20cf1bd91f4204362161d9
--> ea967ff82110
[1/4] STEP 12/14: COPY _build/scripts/entrypoint /opt/builder/bin/entrypoint
--> Using cache bebe9aaf222e3d027b7518e0b36c5056b875a15db0e4100866ab44001bcd1832
--> bebe9aaf222e
[1/4] STEP 13/14: RUN /output/scripts/pip_install $PYCMD
--> Using cache 74f11ac6b9769ea58e3b7a941aabd5449c134f0b5548d9ab2e12cc497c37a585
--> 74f11ac6b976
[1/4] STEP 14/14: RUN $PYCMD -m pip install --no-cache-dir $ANSIBLE_INSTALL_REFS
--> Using cache 821ced187eb2363b38f8e3643f25e6acedfdaf4b03b38155126f38b92674a8e7
--> 821ced187eb2
[2/4] STEP 1/15: FROM 821ced187eb2363b38f8e3643f25e6acedfdaf4b03b38155126f38b92674a8e7 AS galaxy
[2/4] STEP 2/15: ARG EE_BASE_IMAGE
--> Using cache 7396dcbc9cdc607ed93ae332e73bd15b700db25b870697b9b5ad92a281d2e3bb
--> 7396dcbc9cdc
[2/4] STEP 3/15: ARG PYCMD
--> Using cache 21ec2dfb31a86a112331bce1f6a7432ccc601d1ece85462b9ed51d4aaa21ded4
--> 21ec2dfb31a8
[2/4] STEP 4/15: ARG PKGMGR_PRESERVE_CACHE
--> Using cache 04c62661197319e075715b6d564efdbba90e79201fa6fd34ec1eac2422795fab
--> 04c626611973
[2/4] STEP 5/15: ARG ANSIBLE_GALAXY_CLI_COLLECTION_OPTS
--> Using cache fc408d32428e75fe432348fbaa0d5e83208b60fc0c35a508315d5ec2afc80ec7
--> fc408d32428e
[2/4] STEP 6/15: ARG ANSIBLE_GALAXY_CLI_ROLE_OPTS
--> Using cache 262959136186df7f1c09850056c5ecce8da90474e7d682e73b928be9f3e9eacc
--> 262959136186
[2/4] STEP 7/15: ARG ANSIBLE_INSTALL_REFS
--> Using cache 2c093e97700c1ac0deeebddf2afcde62a012a9ee8c46d65b3b8d845964e8719b
--> 2c093e97700c
[2/4] STEP 8/15: ARG PKGMGR
--> Using cache 39ec75bdb7d03ad958119983c720987a439b6cda628e78a65a8f21fbf0564939
--> 39ec75bdb7d0
[2/4] STEP 9/15: COPY _build/ansible.cfg /etc/ansible/ansible.cfg
--> 8ab724df5b85
[2/4] STEP 10/15: RUN /output/scripts/check_galaxy
+ ansible-galaxy --version
ansible-galaxy [core 2.18.0]
  config file = /etc/ansible/ansible.cfg
  configured module search path = ['/home/runner/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.11/site-packages/ansible
  ansible collection location = /home/runner/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/local/bin/ansible-galaxy
  python version = 3.11.13 (main, Aug 21 2025, 00:00:00) [GCC 11.5.0 20240719 (Red Hat 11.5.0-11)] (/usr/bin/python3)
  jinja version = 3.1.6
  libyaml = True
+ '[' 0 -ne 0 ']'
+ exit 0
--> 63f77aab9a1c
[2/4] STEP 11/15: COPY _build /build
--> 7944ad1d3883
[2/4] STEP 12/15: WORKDIR /build
--> 9227ec84dfa1
[2/4] STEP 13/15: RUN mkdir -p /usr/share/ansible
--> 60a0e421e909
[2/4] STEP 14/15: RUN ansible-galaxy role install $ANSIBLE_GALAXY_CLI_ROLE_OPTS -r requirements.yml --roles-path "/usr/share/ansible/roles"
Skipping install, no requirements found
--> 868df12002ff
[2/4] STEP 15/15: RUN ANSIBLE_GALAXY_DISABLE_GPG_VERIFY=1 ansible-galaxy collection install $ANSIBLE_GALAXY_CLI_COLLECTION_OPTS -r requirements.yml --collections-path "/usr/share/ansible/collections"
Starting galaxy collection install process
Process install dependency map
Starting collection install process
'redhat.openshift:5.0.0' is already installed, skipping.
'kubernetes.core:6.1.0' is already installed, skipping.
Downloading https://console.redhat.com/api/automation-hub/v3/plugin/ansible/content/validated/collections/artifacts/infra-aap_utilities-2.8.0.tar.gz to /home/runner/.ansible/tmp/ansible-local-185131b9w2wvs8/tmpb_an_ocs/infra-aap_utilities-2.8.0-l5rijakc
Installing 'infra.aap_utilities:2.8.0' to '/usr/share/ansible/collections/ansible_collections/infra/aap_utilities'
infra.aap_utilities:2.8.0 was installed successfully
'ansible.posix:2.1.0' is already installed, skipping.
--> 1f477f822795
[3/4] STEP 1/17: FROM 821ced187eb2363b38f8e3643f25e6acedfdaf4b03b38155126f38b92674a8e7 AS builder
[3/4] STEP 2/17: ENV PIP_BREAK_SYSTEM_PACKAGES=1
--> fbe18acd50f7
[3/4] STEP 3/17: WORKDIR /build
--> 9a805ac4d9d7
[3/4] STEP 4/17: ARG EE_BASE_IMAGE
--> 8e755e7ebcd7
[3/4] STEP 5/17: ARG PYCMD
--> 45c16994fca0
[3/4] STEP 6/17: ARG PKGMGR_PRESERVE_CACHE
--> b612f3bf8e1c
[3/4] STEP 7/17: ARG ANSIBLE_GALAXY_CLI_COLLECTION_OPTS
--> a2d679e5a9db
[3/4] STEP 8/17: ARG ANSIBLE_GALAXY_CLI_ROLE_OPTS
--> 32eb582850b4
[3/4] STEP 9/17: ARG ANSIBLE_INSTALL_REFS
--> b656e6f92a2e
[3/4] STEP 10/17: ARG PKGMGR
--> dc903aa8faad
[3/4] STEP 11/17: RUN $PYCMD -m pip install --no-cache-dir bindep pyyaml packaging
Collecting bindep
  Downloading bindep-2.13.0-py3-none-any.whl (34 kB)
Requirement already satisfied: pyyaml in /usr/local/lib64/python3.11/site-packages (6.0.2)
Requirement already satisfied: packaging in /usr/local/lib/python3.11/site-packages (24.2)
Requirement already satisfied: distro>=1.7 in /usr/local/lib/python3.11/site-packages (from bindep) (1.9.0)
Collecting Parsley
  Downloading Parsley-1.3-py2.py3-none-any.whl (88 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 88.9/88.9 kB 10.4 MB/s eta 0:00:00
Requirement already satisfied: pbr>=2 in /usr/local/lib/python3.11/site-packages (from bindep) (7.0.1)
Requirement already satisfied: setuptools in /usr/lib/python3.11/site-packages (from pbr>=2->bindep) (65.5.1)
Installing collected packages: Parsley, bindep
Successfully installed Parsley-1.3 bindep-2.13.0
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
--> 4cfc9b6f076d
[3/4] STEP 12/17: COPY --from=galaxy /usr/share/ansible /usr/share/ansible
--> de691a103059
[3/4] STEP 13/17: COPY _build/requirements.txt requirements.txt
--> de4e9f5ca49e
[3/4] STEP 14/17: COPY _build/bindep.txt bindep.txt
--> 1648a8be80d4
[3/4] STEP 15/17: COPY _build/exclude-bindep.txt exclude-bindep.txt
--> 29ee4a0da6ef
[3/4] STEP 16/17: RUN $PYCMD /output/scripts/introspect.py introspect --user-pip=requirements.txt --user-bindep=bindep.txt --exclude-bindep-reqs=exclude-bindep.txt --write-bindep=/tmp/src/bindep.txt --write-pip=/tmp/src/requirements.txt
---
python:
- 'botocore>=1.31.0  # from collection amazon.aws'
- 'boto3>=1.28.0  # from collection amazon.aws'
- 'pytz  # from collection ansible.controller'
- 'python-dateutil>=2.7.0  # from collection ansible.controller'
- 'awxkit  # from collection ansible.controller'
- 'aiobotocore  # from collection ansible.eda'
- 'aiohttp  # from collection ansible.eda'
- 'aiokafka[gssapi]  # from collection ansible.eda'
- 'azure-servicebus  # from collection ansible.eda'
- 'dpath  # from collection ansible.eda'
- 'kafka-python; python_version < "3.12"  # from collection ansible.eda'
- 'kafka-python-ng;  python_version >= "3.12"  # from collection ansible.eda'
- 'psycopg[binary,pool]  # from collection ansible.eda'
- 'systemd-python; sys_platform != ''darwin''  # from collection ansible.eda'
- 'watchdog>=5.0.0  # from collection ansible.eda'
- 'xxhash  # from collection ansible.eda'
- 'ansible-pylibssh >= 0.2.0  # from collection ansible.netcommon'
- 'jxmlease  # from collection ansible.netcommon'
- 'ncclient  # from collection ansible.netcommon'
- 'paramiko  # from collection ansible.netcommon'
- 'xmltodict  # from collection ansible.netcommon'
- 'grpcio  # from collection ansible.netcommon'
- 'protobuf  # from collection ansible.netcommon'
- 'jsonschema  # from collection ansible.utils'
- 'textfsm  # from collection ansible.utils'
- 'ttp  # from collection ansible.utils'
- 'xmltodict  # from collection ansible.utils'
- 'netaddr>=0.10.1  # from collection ansible.utils'
- 'ncclient  # from collection ansible.yang'
- 'pyang  # from collection ansible.yang'
- 'xmltodict  # from collection ansible.yang'
- 'ncclient  # from collection ansible.yang'
- 'pyang  # from collection ansible.yang'
- 'jxmlease  # from collection ansible.yang'
- 'ansible-pylibssh  # from collection arista.eos'
- 'paramiko  # from collection arista.eos'
- 'cryptography >= 36.0.0  # from collection cisco.intersight'
- 'paramiko  # from collection cisco.ios'
- 'ncclient  # from collection cisco.iosxr'
- 'paramiko  # from collection cisco.iosxr'
- 'grpcio  # from collection cisco.iosxr'
- 'protobuf  # from collection cisco.iosxr'
- 'ansible-pylibssh  # from collection cisco.iosxr'
- 'paramiko  # from collection cisco.nxos'
- 'scp  # from collection cisco.nxos'
- 'requests  # from collection hashicorp.terraform'
- 'pydantic>=2.0.0  # from collection hashicorp.terraform'
- 'requests  # from collection hashicorp.vault'
- 'jxmlease  # from collection junipernetworks.junos'
- 'ncclient  # from collection junipernetworks.junos'
- 'paramiko  # from collection junipernetworks.junos'
- 'scp  # from collection junipernetworks.junos'
- 'xmltodict  # from collection junipernetworks.junos'
- 'ansible-pylibssh  # from collection junipernetworks.junos'
- 'kubernetes>=24.2.0  # from collection kubernetes.core'
- 'requests-oauthlib  # from collection kubernetes.core'
- 'jsonpatch  # from collection kubernetes.core'
- 'cryptography >= 3.1  # from collection microsoft.ad'
- 'dnspython >= 2.0.0  # from collection microsoft.ad'
- 'dpapi-ng  # from collection microsoft.ad'
- 'krb5  # from collection microsoft.ad'
- 'pyspnego[kerberos] >= 0.8.0  # from collection microsoft.ad'
- 'sansldap  # from collection microsoft.ad'
- 'lxml  # from collection redhat.amq_broker'
- 'jmespath  # from collection redhat.amq_broker'
- 'lxml  # from collection redhat.data_grid'
- 'jmespath  # from collection redhat.data_grid'
- 'requests  # from collection redhat.insights'
- 'kubernetes>=12.0.0  # from collection redhat.openshift'
- 'requests-oauthlib  # from collection redhat.openshift'
- 'jsonpatch  # from collection redhat.openshift_virtualization'
- 'kubernetes>=28.1.0  # from collection redhat.openshift_virtualization'
- 'lxml  # from collection redhat.redhat_csp_download'
- 'requests  # from collection redhat.redhat_csp_download'
- 'netaddr  # from collection redhat.rhbk'
- 'lxml  # from collection redhat.rhbk'
- 'ovirt-engine-sdk-python>=4.5.0  # from collection redhat.rhv'
- 'ovirt-imageio  # from collection redhat.rhv'
- 'lxml  # from collection redhat.runtimes_common'
- 'jmespath  # from collection redhat.runtimes_common'
- 'requests>=2.4.2  # from collection redhat.satellite'
- 'netaddr  # from collection redhat.sso'
- 'pyVmomi>=8.0.3.0.1  # from collection vmware.vmware'
- 'vmware-vcenter  # from collection vmware.vmware'
- 'vmware-vapi-common-client  # from collection vmware.vmware'
- 'aiohttp  # from collection vmware.vmware'
- 'aiohttp  # from collection vmware.vmware_rest'
- 'requests  # from collection user'
- 'requests-oauthlib  # from collection user'
- 'kubernetes  # from collection user'
- 'openshift  # from collection user'
system:
- 'openssl [test platform:rpm]  # from collection amazon.aws'
- 'gcc [test platform:rpm]  # from collection amazon.aws'
- 'python3-devel [test platform:rpm]  # from collection amazon.aws'
- 'python38-pytz [platform:centos-8 platform:rhel-8]  # from collection ansible.controller'
- 'python38-requests [platform:centos-8 platform:rhel-8]  # from collection ansible.controller'
- 'python38-pyyaml [platform:centos-8 platform:rhel-8]  # from collection ansible.controller'
- 'libsystemd0 [test platform:debian]  # from collection ansible.eda'
- 'libsystemd-dev [test platform:debian]  # from collection ansible.eda'
- 'pkg-config  [test platform:debian]  # from collection ansible.eda'
- 'shellcheck [lint platform:ubuntu-noble]  # from collection ansible.eda'
- 'gcc-c++ [doc test platform:rpm]  # from collection ansible.netcommon'
- 'libyaml-devel [test platform:rpm]  # from collection ansible.netcommon'
- 'libyaml-dev [test platform:dpkg]  # from collection ansible.netcommon'
- 'gcc [compile platform:rpm]  # from collection ansible.netcommon'
- 'libssh-dev [compile platform:dpkg]  # from collection ansible.netcommon'
- 'libssh-devel [compile platform:rpm]  # from collection ansible.netcommon'
- 'python3-Cython [compile platform:fedora-35 platform:rhel-9]  # from collection
  ansible.netcommon'
- 'python3-six [platform:centos-9 platform:rhel-9]  # from collection ansible.netcommon'
- 'python3-lxml [platform:centos-9 platform:rhel-9]  # from collection ansible.netcommon'
- 'findutils [compile platform:centos-8 platform:rhel-8]  # from collection ansible.netcommon'
- 'gcc [compile platform:centos-8 platform:rhel-8]  # from collection ansible.netcommon'
- 'make [compile platform:centos-8 platform:rhel-8]  # from collection ansible.netcommon'
- 'python3-cffi [platform:centos-9 platform:rhel-9]  # from collection ansible.netcommon'
- 'python3-cryptography [platform:centos-9 platform:rhel-9]  # from collection ansible.netcommon'
- 'python3-pycparser [platform:centos-9 platform:rhel-9]  # from collection ansible.netcommon'
- 'libyaml-dev [test platform:dpkg]  # from collection ansible.scm'
- 'gcc-c++ [doc test platform:rpm]  # from collection ansible.utils'
- 'python3-devel [test platform:rpm]  # from collection ansible.utils'
- 'python3 [test platform:rpm]  # from collection ansible.utils'
- 'gcc-c++ [doc test platform:rpm]  # from collection ansible.yang'
- 'libyaml-devel [test platform:rpm]  # from collection ansible.yang'
- 'libyaml-dev [test platform:dpkg]  # from collection ansible.yang'
- 'libxml2-dev [test platform:dpkg]  # from collection ansible.yang'
- 'libxml2-dev [test platform:rpm]  # from collection ansible.yang'
- 'libxslt1-dev [test platform:dpkg]  # from collection ansible.yang'
- 'libxslt1-dev [test platform:rpm]  # from collection ansible.yang'
- 'gcc-c++ [doc test platform:rpm]  # from collection arista.eos'
- 'python3-devel [test platform:rpm]  # from collection arista.eos'
- 'python3 [test platform:rpm]  # from collection arista.eos'
- 'libssh-devel [test platform:rpm]  # from collection arista.eos'
- 'libffi-devel [test platform:rpm]  # from collection arista.eos'
- 'openssl-devel [test platform:rpm]  # from collection arista.eos'
- 'gcc-c++ [doc test platform:rpm]  # from collection cisco.ios'
- 'python3-devel [test platform:rpm]  # from collection cisco.ios'
- 'python3 [test platform:rpm]  # from collection cisco.ios'
- 'gcc-c++ [doc test platform:rpm]  # from collection cisco.iosxr'
- 'libssh-devel [test platform:rpm]  # from collection cisco.iosxr'
- 'libffi-devel [test platform:rpm]  # from collection cisco.iosxr'
- 'openssl-devel [test platform:rpm]  # from collection cisco.iosxr'
- 'python3-lxml [platform:centos-8 platform:rhel-8]  # from collection cisco.iosxr'
- 'gcc-c++ [doc test platform:rpm]  # from collection cisco.nxos'
- 'gcc-c++ [doc test platform:rpm]  # from collection junipernetworks.junos'
- 'python3-devel [test platform:rpm]  # from collection junipernetworks.junos'
- 'python3 [test platform:rpm]  # from collection junipernetworks.junos'
- 'libssh-devel [compile platform:rpm]  # from collection junipernetworks.junos'
- 'kubernetes-client [platform:fedora]  # from collection kubernetes.core'
- 'gcc [compile platform:rpm]  # from collection microsoft.ad'
- 'krb5-devel [compile platform:rpm]  # from collection microsoft.ad'
- 'krb5-libs [platform:rpm]  # from collection microsoft.ad'
- 'python3-devel [compile platform:rpm]  # from collection microsoft.ad'
- 'python39-devel [compile platform:centos-8 platform:rhel-8]  # from collection microsoft.ad'
- 'python3-lxml [platform:rpm]  # from collection redhat.amq_broker'
- 'python3-jmespath [platform:rpm]  # from collection redhat.amq_broker'
- 'python3-devel [compile platform:rpm]  # from collection redhat.data_grid'
- 'python39-devel [compile platform:centos-8 platform:rhel-8]  # from collection redhat.data_grid'
- 'python3-lxml [platform:rpm]  # from collection redhat.data_grid'
- 'python3-jmespath [platform:rpm]  # from collection redhat.data_grid'
- 'python3-requests [platform:rpm]  # from collection redhat.data_grid'
- 'python38-requests [platform:centos-8 platform:rhel-8]  # from collection redhat.insights'
- 'python3-devel [compile platform:rpm]  # from collection redhat.jws'
- 'python39-devel [compile platform:centos-8 platform:rhel-8]  # from collection redhat.jws'
- 'python3-requests [platform:rpm]  # from collection redhat.jws'
- 'python3-dev [compile platform:dpkg]  # from collection redhat.rhbk'
- 'python3-devel [compile platform:rpm]  # from collection redhat.rhbk'
- 'python39-devel [compile platform:centos-8 platform:rhel-8]  # from collection redhat.rhbk'
- 'git-lfs [platform:rpm platform:dpkg]  # from collection redhat.rhbk'
- 'python3-netaddr [platform:rpm platform:dpkg]  # from collection redhat.rhbk'
- 'python3-lxml [platform:rpm platform:dpkg]  # from collection redhat.rhbk'
- 'python3-jmespath [platform:rpm platform:dpkg]  # from collection redhat.rhbk'
- 'python3-requests [platform:rpm platform:dpkg]  # from collection redhat.rhbk'
- 'openssl  # from collection redhat.rhel_system_roles'
- 'dnf  # from collection redhat.rhel_system_roles'
- 'gcc [compile platform:centos-8 platform:rhel-8]  # from collection redhat.rhv'
- 'libcurl-devel [compile platform:centos-8 platform:rhel-8]  # from collection redhat.rhv'
- 'libxml2-devel [compile platform:centos-8 platform:rhel-8]  # from collection redhat.rhv'
- 'openssl-devel [compile platform:centos-8 platform:rhel-8]  # from collection redhat.rhv'
- 'python38-devel [compile platform:centos-8 platform:rhel-8]  # from collection redhat.rhv'
- 'qemu-img [platform:centos-8 platform:rhel-8]  # from collection redhat.rhv'
- 'python3-rpm [(platform:redhat platform:base-py3)]  # from collection redhat.satellite'
- 'python38-requests [platform:centos-8 platform:rhel-8]  # from collection redhat.satellite'
- 'python3-devel [compile platform:rpm]  # from collection redhat.sso'
- 'python39-devel [compile platform:centos-8 platform:rhel-8]  # from collection redhat.sso'
- 'git-lfs [platform:rpm]  # from collection redhat.sso'
- 'python3-netaddr [platform:rpm]  # from collection redhat.sso'
- 'python3-lxml [platform:rpm]  # from collection redhat.sso'
- 'python3-jmespath [platform:rpm]  # from collection redhat.sso'
- 'python3-requests [platform:rpm]  # from collection redhat.sso'
- 'gcc-c++ [doc test platform:rpm]  # from collection splunk.es'
- 'python3-devel [test platform:rpm]  # from collection splunk.es'
- 'python3 [test platform:rpm]  # from collection splunk.es'
- 'gcc-c++ [doc test platform:rpm]  # from collection trendmicro.deepsec'
- 'python3-devel [test platform:rpm]  # from collection trendmicro.deepsec'
- 'python3 [test platform:rpm]  # from collection trendmicro.deepsec'
- 'gcc [compile platform:centos-8 platform:rhel-8]  # from collection vmware.vmware_rest'
- 'gcc [compile platform:rhel-9]  # from collection vmware.vmware_rest'
- 'requests  # from collection user'
- 'requests-oauthlib  # from collection user'
- 'kubernetes  # from collection user'
Creating parent directory for /tmp/src/requirements.txt

----
====

== Summary

You have successfully deployed Ansible Automation Platform using a Configuration as Code pattern. This method ensures that your automation infrastructure remains consistent and can be easily redeployed or updated through Git-driven workflows.

== Helpful Links:

* https://console.redhat.com/ansible/automation-hub/repo/validated/infra/aap_utilities/
* https://console.redhat.com/ansible/automation-hub/repo/validated/infra/aap_utilities/content/role/aap_ocp_install/